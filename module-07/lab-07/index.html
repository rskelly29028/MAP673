<!DOCTYPE html>
<html>

<head>
    <title>South Carolina</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <link rel="shortcut icon" href="http://cartodb.com/assets/favicon.ico" />
    <style>
      html, body, #map {
        height: 100%;
        padding: 5;
        margin: 5;
      }

      body > div.cartodb-header{
      display: none;
      position: absolute;
      top: 0%;
      left: 5%;
      width: 20%;
      background-color: rgba(0,0,0,0);
      line-height: normal;
      font-weight: 500;
      }
    
  </style> 
    

    <link rel="stylesheet" href="https://cartodb-libs.global.ssl.fastly.net/cartodb.js/v3/3.15/themes/css/cartodb.css" />

    <script type='html' id="legend_template">
 
    <div class='cartodb-legend density'>  
    <ul>
    <li class="min">
    Support for Candidate
    </li>
  
    <li class="graph leg" style="border-radius: 0; border:none">
    <div class="colors">
    <div class="quartile" style="background-color:#E40800"></div>
    <div class="quartile" style="background-color:#E18189"></div>
    <div class="quartile" style="background-color:#E7AFBA"></div>
    <div class="quartile" style="background-color:#BBCEE1"></div>
    <div class="quartile" style="background-color:#4980D7"></div>
    <div class="quartile" style="background-color:#0903AE"></div>
    </div>
    <div class="colors" style="font-weight:normal; text-align: center">
    <div class="quartile" style="padding-top: 5px" >TRUMP</div>
    <div class="quartile" style="padding-top: 5px" > </div>
    <div class="quartile" style="padding-top: 5px" > </div>
    <div class="quartile" style="padding-top: 5px" > </div>
    <div class="quartile" style="padding-top: 5px" > </div>
    <div class="quartile" style="padding-top: 5px" >CLINTON</div>
  </div>
  </li>
</ul>
</div>

 </script>
    
    <style>
        html,
        body,
        
        #map {
            height: 100%;
            padding: 0;
            margin: 0;
            background: black;
        }
        
    </style>
</head>

<body>

    <div id="map"></div>
    
    <script src="https://cartodb-libs.global.ssl.fastly.net/cartodb.js/v3/3.15/cartodb.js"></script>
    <script type="cartocss/html" id="counties-styles">
     
    </script>
    
    <script>

    var map = L.map('map', {
        center: [33.5,-81],
        zoom: 7.5,
        maxZoom: 8,
        minZoom: 7
    });
        
    var cartoCSS = "#layer {" + "polygon-fill: ramp([perc_clinton], (#e40800, #e18189, #e7afba, #bbcee1, #4d80d7, #0903ae) quantiles);" +
    "line-width: 2;" +
    "line-color: #FFF;" +
    "line-opacity: 0.75;" +
    "}";

    var sourceObject = {
        user_name: 'rkelly0007',
        type: 'cartodb',
        sublayers: [
        {
            sql: "SELECT * FROM south_carolina",
            cartocss: cartoCSS
        }
        ]
    }

    var legend = new cdb.geo.ui.Legend({
            type: "custom",
            show_title: false,
            title: "",
            template: $('#legend_template').html(),
            visible: true,
            });
        
        $('#map').append(legend.render().el);
        
    cartodb.createLayer(map, sourceObject).addTo(map);

      var i = new cdb.geo.ui.Header({

        model: new cdb.core.Model({
        extra: {
        title: "GENERAL ELECTION 2016 ",
        description: "South Carolina by County 2016, Data From State Board of Elections at http://www.enr-scvotes.org/SC/64658/183653/en/select-county.html",
        show_title: true,
        show_description: true,
       }
     }),
          
     template: cdb.core.Template.compile(' \
     <div class="content">\
     <div class="title">{{{ title }}}</div>\
     <div class="description">{{{ description }}}</div>\
     </div>',
     'mustache'
    )
      });
      $('body').append(i.render().el);

    </script>
    
</body>

</html>
